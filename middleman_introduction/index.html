<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Коротко про Мідлмен</title><link href="favicon.png" rel="icon" type="image/png" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="" name="description" /><meta content="Kraiany" name="author" /><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" /><link href="../assets/stylesheets/all-9f1421a7.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Roboto+Condensed:400italic,400,700&subset=cyrillic-ext,latin" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Roboto:400,400italic,900,900italic&subset=cyrillic-ext,latin" rel="stylesheet" type="text/css" /></head><body><div class="container-narrow"><div class="content"><h1>Як мати власну веб сторінку на Ґітхабі?</h1><div class="row"><h2>Коротко про Мідлмен</h2><header class="well well-black col-md-3"><h2>Навігація</h2><ul><li class=''><a class='btn btn-lg btn-raised btn-material-red-800' href='/startpack//'>Що це таке?<div class='ripple-wrapper'></div></a><ul><li class=''><a class='btn btn-dummy btn-raised btn-material-red-600' href='/startpack/git_github/'>Git та Github<div class='ripple-wrapper'></div></a></ul><li class=''><a class='btn btn-lg btn-raised btn-material-red-800' href='/startpack/static_or/'>Статична сторінка?<div class='ripple-wrapper'></div></a><ul><li class=''><a class='btn btn-dummy btn-raised btn-material-red-600' href='/startpack/generators/'>Статичні генератори<div class='ripple-wrapper'></div></a><li class=''><a class='btn btn-dummy btn-raised btn-material-red-600' href='/startpack/jekyll_middleman/'>Джекіл і Мідлмен<div class='ripple-wrapper'></div></a><ul><li class=''><a class='btn btn-sm btn-raised btn-material-red-400' href='/startpack/jekyll-introduction/'>Jekyll Introduction (англ.)<div class='ripple-wrapper'></div></a><li class=''><a class='btn btn-sm btn-raised btn-material-red-400' href='/startpack/middleman_introduction/'>Коротко про Мідлмен<div class='ripple-wrapper'></div></a></ul></ul><li class=''><a class='btn btn-lg btn-raised btn-material-red-800' href='/startpack/open_project/'>Відкритий проект?<div class='ripple-wrapper'></div></a><ul><li class=''><a class='btn btn-dummy btn-raised btn-material-red-600' href='/startpack/big_companies/'>Відкритість --- для лузерів!<div class='ripple-wrapper'></div></a></ul><li class=''><a class='btn btn-lg btn-raised btn-material-red-800' href='/startpack/first_steps/'>З чого почати?<div class='ripple-wrapper'></div></a><li class=''><a class='btn btn-lg btn-raised btn-material-red-800' href='/startpack/dict/'>Словничок<div class='ripple-wrapper'></div></a></ul></header><section class="col-md-6"><ul class="nav toc"><h5>Зміст</h5><li><a href="#section">Структура директорій</a></li><li><a href="#section-1">Препроцесори та попередня обробка</a></li><li><a href="#section-2">Обробка активів</a></li><li><a href="#section-3">Активи Sprockets</a></li><li><a href="#section-4">Хеш теги активів</a></li></ul><hr /><h2 id="section">Структура директорій</h2>

<p>Мідлмен встановлює свій набір правил, погоджень щодо розташування файлів та структури директорій проекту. Нижче показаний типовий вигляд директорій мінімального проекту. В даному випадку зразок веб майданчика складається з однієї єдиної сторінки <code>index.html</code></p>

<pre><code>.
├── build
├── config.rb
├── data
│   └── site.yml
└── source
    ├── assets
    │   ├── fonts
    │   ├── images
    │   │   ├── new_fork.png
    │   │   └── new_repo.png
    │   ├── javascripts
    │   │   ├── all.js
    │   │   ├── bootstrap.min.js
    │   │   └── jquery-1.9.1.min.js
    │   └── stylesheets
    │       ├── all.css
    │       ├── bootstrap.min.css
    │       └── style.css.scss
    ├── index.html.md
    ├── layouts
    │   └── layout.html.slim
    └── partials
        ├── _footer.html.slim
        ├── _navigation.html.slim
        └── _toc.html.slim
</code></pre>

<ul>
  <li><strong>build</strong> — ця директорія містить (буде містити) згенеровані файли вашого проекту. Для публікації сайту на вебі, просто скопіюйте цю директорію як вона є на веб сервер.</li>
  <li><strong>config.rb</strong> — конфігурація проекту Мідлмен.</li>
  <li><strong>source</strong> — вихідні тексти веб майданчика, включає активи (графіку, шрифти, CSS стилі), шаблони та макети сторінки, тексти.</li>
  <li><strong>source/assets</strong> — активи: графіка, Javascript та CSS</li>
  <li><strong>source/assets/javascripts</strong> — файли Javascript</li>
  <li><strong>source/assets/stylesheets</strong> — файли CSS стилів</li>
  <li><strong>source/assets/image</strong> — графічні файли</li>
  <li><strong>layouts</strong> — шаблони макети майданчику.</li>
  <li><strong>partials</strong> — „часткові“ шаблони. Часто вживані елементи макета можна помістити в окремий файл для того, щоб їх можна було включати в різні частини макета. За домовленістю, яку Мідлмен успадкував від Ruby-on-rails, назви файлів часткових шаблонів мають починатися з символа підкреслення („<code>_</code>“). В нашому випадку використовуються три файли часткових шаблонів <code>_footer.html.slim</code>, <code>_navigation.html.slim</code> та  <code>_toc.html.slim</code> для підвалу сторінки, меню навігації та таблиці змісту, відповідно.</li>
  <li><strong>data</strong> — структуровані дані сторінки. Структури даних можуть бути створені у форматах JSON або YAML. При макетуванні сторінки ці дані можна включати в файли шаблонів, таким чином всі дані про майданчик (як, наприклад, ім´я та координати автора, категоризацію, тощо) можна тримати в одному і місці і використовувати їх за потребою.</li>
</ul>

<h3 id="section-1">Препроцесори та попередня обробка</h3>

<p>Деякі файли у Мідлмені можуть мати по кілька розширень (типів файла).</p>

<p>Як, наприклад, вже згадані файли часткових шаблонів мають по два розширення: <code>.html.slim</code> Ці типи вказують Мідлмену: у якому форматі має бути остаточно згенегований файл, та яким(якими) препроцесором потрібно його обробляти. В нашому випадку, Мідлмен повинен створити файл у форматі HTML, а початковий вихідний текст файлу — у форматі <a href="http://slim-lang.com/">SLIM</a>.</p>

<p>Так само для генерування файлів стилів CSS можуть використовуватися або <a href="http://sass-lang.com/">SASS (SCSS)</a>, або <a href="http://lesscss.org/">LESS</a>, тож відповідно файли в директорії <code>source/assets/stylesheets</code> будуть або мати типи <code>.css.scss</code>, <code>.css.sass</code> чи <code>.css.less</code>.</p>

<p>Теж саме стосується не тільки шаблонів, а й власне змісту майданчику. Більшість текстових файлів створюються у форматі Markdown, тож текстові файли вмісту мають тип <code>.html.md</code></p>

<p>Мідлмен може використовувати більше одного препроцесора для генерації остаточного файла, в такому випадку Міддлмен читає розширення файлів зправа наліво і застосовує препроцесори по черзі. В даному проекті подвійний препроцесор використовується у файлі <a href="https://github.com/dmytro/startpack/blob/master/source/first_steps.html.md.erb#L47"><code>first_steps.html.md.erb</code></a>, де для функції-помічника використовується формат ERB, а після нього — Markdown.</p>

<h2 id="section-2">Обробка активів</h2>

<p>Кілька слів потрібно сказати про обробку активів, особливо файлів Javascript та CSS.</p>

<p>Мідлмен користується системою обробки активів, так званим „<a href="http://dict#asset%20pipeline">трубопроводом активів</a>“ (тут далі — ТА), під назвою <a href="https://github.com/sstephenson/sprockets">Sprockets</a> (англ. „шерстеня“), який використовується в Ruby-on-Rails. ТА оптимізує активи, включені в проект з метою прискорення роботи веб сторінки.</p>

<h3 id="sprockets">Активи Sprockets</h3>

<p>Насьогодні розробники веб майданчиків користуються сторонніми розробками, такими, як наприклад, бібліотекою jQuery та різноманітними модулями для неї, або стилями для Bootstrap. Це приводить до того, що при завантаженні кожної HTML сторінки, разом з нею мають завантажуватися численні <code>*.js</code> та <code>*.css</code> файли. Кожен з них може бути зовсім невеличким, але для завантаження кожного з цих файлів веб клієнт (броузер), повинен надіслати запит до веб-сервера і звантажити цей файл. Це значно сповільнює завантаження кожної сторінки для користувача.</p>

<p>ТА згруповує всі <code>*.js</code> файли у один файл, <code>all.js</code>, а всі таблиці стилів <code>*.css</code> у один файл <code>all.css</code>.  А також проводить його попередню обробку, наприклад, компресію (чи мінімізацію) за рахунок видалення несуттєвого: пустих пробілі, порожніх рядків та коментарів.</p>

<p>Sprockets використовує спеціальний синтаксис: у файлах <code>all.js</code> та <code>all.css</code> здебільшого немає ні Javascript, ні CSS коду, а міститься тільки псевдо-код, для включення потрібних файлів, а в HTML шаблон включається тільки посилання на <code>all.*</code> файли.</p>

<p>Наприклад, <code>all.js</code> може виглядати приблизно так:</p>

<pre><code>//= require jquery-1.9.1.min
//= require bootstrap.min
//= require material.min
//= require ripples.min
</code></pre>

<p>або навіть ось так (цим будуть вкючені всі файли <code>source/assets/javascripts/*.js</code>):</p>

<pre><code>//= require_tree .
</code></pre>

<h4 id="section-3">Хеш теги активів</h4>

<p>Для полегшення роботи кешу веб переглядачами, Sprockets додає до назв файлів <code>all.js</code> та  <code>all.css</code> спеціальну „етикетку“, яка змінюється тільки коли зміст цих файлів змінюється. В згенерованому HTML чи посилання будуть виглядати приблизно так:</p>

<pre><code>&lt;link href="assets/stylesheets/all-c0e86d17.css" media="screen" rel="stylesheet" type="text/css" /&gt;
&lt;script src="assets/javascripts/all-ccaaadd2.js" type="text/javascript"&gt;&lt;/script&gt;
</code></pre>
</section><div class="col-md-3">&nbsp;</div></div></div></div></body><footer class="container-narrow"><div class="content"><div class="row"><div class="col-md-4"><a class="fa-social" href="https://dmytro.github.io"><i class="fa fa-home fa-lg"></i> </a><a class="fa-social" href="https://www.facebook.com/dmytro.kovalov"><i class="fa fa-facebook-square fa-lg"></i> </a><a class="fa-social" href="https://plus.google.com/u/0/107895338755271736698/posts"><i class="fa fa-google-plus-square fa-lg"></i> </a><a class="fa-social" href="https://github.com/dmytro"><i class="fa fa-github-square fa-lg"></i> </a><a class="fa-social" href="mailto:dmytro.kovalov@gmail.com"><i class="fa fa-envelope-o fa-lg"></i> </a><span class="fa-social">Дмитро</span><br /><a class="fa-social" href="https://www.facebook.com/ukrainians.japan"><i class="fa fa-facebook-square fa-lg fa-social"></i> </a><a class="fa-social" href="https://groups.yahoo.com/neo/groups/kraiany/info"><span class="fa-stack fa-social fa-small"><i class="fa fa-square fa-stack-2x "></i><i class="fa fa-yahoo fa-stack-1x fa-inverse"></i></span>Краяни</a> </div><div class="col-md-4 col-md-offset-4"><p><small>Опубліковано на<a href="http://pages.github.com/"> GitHub Pages</a> з використанням <a href="https://middlemanapp.com/">Middleman</a> та <a href="https://github.com/FezVrasta/bootstrap-material-design"> Material Design</a> для<a href="http://getbootstrap.com/"> Bootstrap</a></small></p><p><small><i>Розпочато <a href="http://dmytro.github.io">Дмитро Ковальов</a>
липень 2014<br />Останнє поновлення: 2015-03-24 12:22:27 +0900</i></small></p></div></div></div></footer><script src="../assets/javascripts/all-ccaaadd2.js" type="text/javascript"></script></html>